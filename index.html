<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TDEE Calculator | Ever Lean</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Inter:wght@400;500;600&family=Playfair+Display:ital,wght@0,500;1,500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2A241B;
            --secondary: #8A9B69; /* Sage green from Ever Lean */
            --accent: #C97D5E;
            --background: #F9F5F0;
            --body-opacity: 0.88;
            --ease-standard: cubic-bezier(0.4, 0, 0.2, 1);
            --animation-duration: 2.8s;
        }

        /* TYPOGRAPHY SYSTEM */
        h1, h2, h3, .metric-font {
            font-family: 'Cormorant Garamond', serif;
            letter-spacing: -0.5px;
            line-height: 1.2;
            color: var(--primary);
        }
        body, button, input, select {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: rgba(42, 36, 27, var(--body-opacity));
        }

        /* PRELOADER STYLES */
        #preloader {
            position: fixed;
            inset: 0;
            z-index: 100;
            background-color: var(--background);
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 1s var(--ease-standard), visibility 1s;
        }

        .preloader-hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .infinity {
            fill: none;
            stroke: var(--secondary);
            stroke-width: 8;
            stroke-linecap: round;
            stroke-linejoin: round;
            stroke-dasharray: 1200;
            stroke-dashoffset: 1200;
            animation: drawStroke var(--animation-duration) var(--ease-standard) forwards;
        }

        .brand-text-anim {
            font-family: 'Playfair Display', serif;
            font-size: 82px;
            font-weight: 500;
            fill: var(--primary);
            opacity: 0;
            text-anchor: middle;
            dominant-baseline: middle;
            animation: fadeInText 1.5s ease-out 0.8s forwards;
        }

        /* BACKGROUND GRAIN */
        .grain {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            opacity: 0.04;
            pointer-events: none;
            z-index: 1;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        /* MAIN CONTENT ANIMATION */
        #main-content {
            opacity: 0;
            transform: translateY(30px);
            transition: all 1.2s var(--ease-standard);
        }

        .content-visible {
            opacity: 1 !important;
            transform: translateY(0) !important;
        }

        /* PREMIUM UI COMPONENTS */
        .btn-artisan {
            position: relative;
            overflow: hidden;
            transition: all 300ms var(--ease-standard);
            border-radius: 6px;
            background: var(--secondary);
            color: white;
            box-shadow: 0 4px 14px rgba(138, 155, 105, 0.3);
        }
        .btn-artisan:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(138, 155, 105, 0.4);
            filter: brightness(1.05);
        }

        .input-artisan {
            border: 1px solid rgba(42, 36, 27, 0.1);
            border-radius: 6px;
            background: white;
            transition: all 300ms var(--ease-standard);
        }
        .input-artisan:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 4px rgba(138, 155, 105, 0.1);
            transform: translateX(4px);
        }

        .card-artisan {
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 50px rgba(42, 36, 27, 0.04);
            border: 1px solid rgba(42, 36, 27, 0.03);
        }

        .gender-btn.active {
            background: var(--secondary);
            color: white;
            box-shadow: 0 4px 10px rgba(138, 155, 105, 0.2);
        }

        @keyframes drawStroke {
            to { stroke-dashoffset: 0; }
        }

        @keyframes fadeInText {
            0% { opacity: 0; transform: scale(0.95); }
            100% { opacity: 1; transform: scale(1); }
        }

        @keyframes countUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .metric-update {
            animation: countUp 400ms var(--ease-standard);
        }
    </style>
</head>
<body class="bg-[#F9F5F0] min-h-screen flex items-center justify-center p-6 overflow-x-hidden">

    <div class="grain"></div>

    <!-- 1. PRELOADER -->
    <div id="preloader">
        <svg viewBox="0 0 800 450" class="w-full max-w-2xl h-auto">
            <path class="infinity" d="M400,225 
                     C500,140 650,140 650,225 
                     C650,310 500,310 400,225 
                     C300,140 150,140 150,225 
                     C150,310 300,310 400,225" />
            <text x="400" y="235" class="brand-text-anim">Ever Lean</text>
        </svg>
    </div>

    <!-- 2. MAIN CALCULATOR -->
    <div id="main-content" class="w-full max-w-xl relative z-10">
        <div class="card-artisan p-8 md:p-12">
            
            <div class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-bold mb-3">TDEE Calculator</h1>
                <p class="text-gray-400 italic font-medium tracking-wide">Physiological Precision by Ever Lean</p>
            </div>

            <!-- Form -->
            <div class="space-y-10">
                <!-- Gender -->
                <div>
                    <label class="block text-[10px] uppercase tracking-[0.2em] font-bold text-gray-400 mb-4">Biological Gender</label>
                    <div class="flex space-x-3 p-1.5 bg-gray-50 rounded-xl border border-gray-100">
                        <button id="gender-male" onclick="setGender('male')" class="gender-btn flex-1 py-3 text-center rounded-lg text-sm font-semibold transition-all active">Male</button>
                        <button id="gender-female" onclick="setGender('female')" class="gender-btn flex-1 py-3 text-center rounded-lg text-sm font-semibold transition-all text-gray-400">Female</button>
                    </div>
                    <input type="hidden" id="gender" value="male">
                </div>

                <!-- Metrics Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <label for="weight" class="block text-[10px] uppercase tracking-[0.2em] font-bold text-gray-400 mb-3">Weight (kg)</label>
                        <input type="number" id="weight" placeholder="70" class="input-artisan w-full px-5 py-4 text-lg">
                    </div>
                    <div>
                        <label for="height" class="block text-[10px] uppercase tracking-[0.2em] font-bold text-gray-400 mb-3">Height (cm)</label>
                        <input type="number" id="height" placeholder="175" class="input-artisan w-full px-5 py-4 text-lg">
                    </div>
                </div>

                <!-- Age -->
                <div>
                    <label for="age" class="block text-[10px] uppercase tracking-[0.2em] font-bold text-gray-400 mb-3">Age (years)</label>
                    <input type="number" id="age" placeholder="28" class="input-artisan w-full px-5 py-4 text-lg">
                </div>

                <!-- Activity -->
                <div>
                    <label for="activity" class="block text-[10px] uppercase tracking-[0.2em] font-bold text-gray-400 mb-3">Activity Architecture</label>
                    <div class="relative">
                        <select id="activity" class="input-artisan w-full px-5 py-4 text-md bg-white appearance-none cursor-pointer">
                            <option value="1.2">Sedentary (Minimum movement)</option>
                            <option value="1.375">Lightly Active (1-2 days/week)</option>
                            <option value="1.55" selected>Moderately Active (3-5 days/week)</option>
                            <option value="1.725">Very Active (6-7 days/week)</option>
                            <option value="1.9">Elite (Professional training)</option>
                        </select>
                        <div class="absolute right-5 top-1/2 -translate-y-1/2 pointer-events-none text-gray-300">
                            <svg width="12" height="8" viewBox="0 0 12 8" fill="none"><path d="M1 1L6 6L11 1" stroke="currentColor" stroke-width="2"/></svg>
                        </div>
                    </div>
                </div>

                <button onclick="calculateTDEE()" class="btn-artisan w-full py-5 text-lg font-bold tracking-widest mt-4">
                    CALCULATE EXPENDITURE
                </button>
            </div>

            <!-- Results -->
            <div id="result-container" class="mt-16 pt-12 border-t border-gray-50 hidden">
                <div class="space-y-6">
                    <div class="flex justify-between items-center px-2">
                        <span class="text-[10px] font-bold text-gray-400 uppercase tracking-widest">Basal Metabolic Rate</span>
                        <span id="bmr-result" class="text-2xl font-bold metric-font">0 kcal</span>
                    </div>

                    <div class="bg-[#F4F1EC] p-10 rounded-2xl border-l-8 border-[#8A9B69] shadow-sm flex flex-col md:flex-row justify-between items-center gap-4">
                        <div>
                            <h3 class="text-xs font-black text-[#8A9B69] uppercase tracking-[0.3em] mb-1">Maintenance Target</h3>
                            <p class="text-sm text-gray-500 italic">Recommended daily caloric intake</p>
                        </div>
                        <span id="tdee-result" class="text-5xl font-bold metric-font text-[#2A241B]">0 kcal</span>
                    </div>
                </div>
            </div>

            <p id="error-message" class="mt-8 text-center text-sm text-[#C97D5E] font-semibold hidden tracking-wide">Invalid physiological input detected.</p>
        </div>
        
        <footer class="mt-12 text-center text-[10px] text-gray-400 uppercase tracking-[0.4em] font-bold">
            &copy; 2025 Ever Lean Physiology
        </footer>
    </div>

    <script>
        // Preloader Logic
        window.addEventListener('load', () => {
            const preloader = document.getElementById('preloader');
            const mainContent = document.getElementById('main-content');
            
            // Allow animation to finish (approx 3.5s for a premium feel)
            setTimeout(() => {
                preloader.classList.add('preloader-hidden');
                setTimeout(() => {
                    mainContent.classList.add('content-visible');
                }, 300);
            }, 3800);
        });

        function setGender(gender) {
            const maleBtn = document.getElementById('gender-male');
            const femaleBtn = document.getElementById('gender-female');
            const genderInput = document.getElementById('gender');

            if (gender === 'male') {
                genderInput.value = 'male';
                maleBtn.classList.add('active');
                maleBtn.classList.remove('text-gray-400');
                femaleBtn.classList.remove('active');
                femaleBtn.classList.add('text-gray-400');
            } else {
                genderInput.value = 'female';
                femaleBtn.classList.add('active');
                femaleBtn.classList.remove('text-gray-400');
                maleBtn.classList.remove('active');
                maleBtn.classList.add('text-gray-400');
            }
        }

        function calculateTDEE() {
            const weight = parseFloat(document.getElementById('weight').value);
            const height = parseFloat(document.getElementById('height').value);
            const age = parseFloat(document.getElementById('age').value);
            const gender = document.getElementById('gender').value;
            const activityFactor = parseFloat(document.getElementById('activity').value);
            
            const errorElement = document.getElementById('error-message');
            const resultContainer = document.getElementById('result-container');

            if (!weight || !height || !age || weight <= 0 || height <= 0 || age <= 0) {
                errorElement.classList.remove('hidden');
                resultContainer.classList.add('hidden');
                return;
            }
            
            errorElement.classList.add('hidden');
            
            // Mifflin-St Jeor
            const base = (10 * weight) + (6.25 * height) - (5 * age);
            const bmr = gender === 'male' ? base + 5 : base - 161;
            const tdee = bmr * activityFactor;
            
            const bmrRes = document.getElementById('bmr-result');
            const tdeeRes = document.getElementById('tdee-result');
            
            bmrRes.textContent = `${Math.round(bmr)} kcal`;
            tdeeRes.textContent = `${Math.round(tdee)} kcal`;
            
            bmrRes.classList.remove('metric-update');
            tdeeRes.classList.remove('metric-update');
            void bmrRes.offsetWidth; 
            bmrRes.classList.add('metric-update');
            tdeeRes.classList.add('metric-update');

            resultContainer.classList.remove('hidden');
            resultContainer.scrollIntoView({ behavior: 'smooth', block: 'end' });
        }
    </script>
</body>
</html>
